<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Happy 2nd Anniversary ğŸ’–</title>

  <style>
    * { box-sizing: border-box; font-family: 'Poppins', sans-serif; }
    body {
      margin: 0;
      min-height: 100vh;
      background: linear-gradient(135deg, #ffd6e8, #e0c3ff);
      display: flex;
      justify-content: center;
      align-items: center;
    }
    .card {
      background: rgba(255,255,255,0.95);
      border-radius: 24px;
      padding: 32px;
      max-width: 420px;
      width: 90%;
      text-align: center;
      box-shadow: 0 20px 40px rgba(0,0,0,0.15);
      animation: float 4s ease-in-out infinite;
    }
    @keyframes float {
      0%,100%{transform:translateY(0)}
      50%{transform:translateY(-8px)}
    }
    h1{color:#ff5fa2;margin-bottom:6px}
    h2{color:#6a4cff;margin-top:0;font-weight:500}
    p{color:#444;font-size:0.95rem;line-height:1.6}
    .heart{font-size:2.5rem;animation:pulse 1.5s infinite}
    @keyframes pulse{0%{transform:scale(1)}50%{transform:scale(1.15)}100%{transform:scale(1)}}
    .buttons{display:flex;gap:14px;flex-wrap:wrap;justify-content:center;margin-top:22px}
    .btn{
      padding:14px 22px;
      border-radius:14px;
      border:none;
      background:linear-gradient(145deg,#ff8acb,#ff5fa2);
      color:white;
      cursor:pointer;
      box-shadow:0 8px 0 #d94b88,0 14px 25px rgba(0,0,0,0.25);
    }
    .btn:active{transform:translateY(6px);box-shadow:0 2px 0 #d94b88}
    .note{margin-top:18px;background:#fff0f7;padding:16px;border-radius:16px;color:#d94b88;display:none}
    textarea{width:100%;border-radius:14px;padding:12px;border:1px solid #ffd6e8;resize:none}
  </style>
</head>
<body>

<div class="card" id="card">
  <h1>Happy 2nd Anniversary ğŸ’•</h1>
  <h2>To Us & Our Story</h2>
  <div class="heart">ğŸ’—</div>

  <p>Two years ago, something beautiful began. Every moment with you is home.</p>

  <div class="buttons">
    <button class="btn" onclick="showNote(1)">Why I Love You ğŸ’–</button>
    <button class="btn" onclick="showNote(2)">Our Memories ğŸ“¸</button>
    <button class="btn" onclick="showNote(3)">Forever Promise ğŸ’</button>
    <button class="btn" onclick="openMemories()">Our Memory Box ğŸ§¸</button>
  </div>

  <div id="note1" class="note">I love your heart, your chaos, and the way you calm me.</div>
  <div id="note2" class="note">Every laugh, every tear â€” I want them all with you.</div>
  <div id="note3" class="note">No matter what happens, I choose you. Always.</div>
</div>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
  import { getDatabase, ref, push, onValue } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";

  const firebaseConfig = {
    apiKey: "AIzaSyBfT5sg9iKKz4_8ezyPm1nMcow-L8zyv_w",
    authDomain: "anniversary-365e4.firebaseapp.com",
    databaseURL: "https://anniversary-365e4-default-rtdb.asia-southeast1.firebasedatabase.app",
    projectId: "anniversary-365e4",
    storageBucket: "anniversary-365e4.appspot.com",
    messagingSenderId: "156417240087",
    appId: "1:156417240087:web:92c1d4e5a989294e678052"
  };

  const app = initializeApp(firebaseConfig);
  const db = getDatabase(app);
  const memoriesRef = ref(db, 'memories');

  window.showNote = function(n){
    document.querySelectorAll('.note').forEach(x=>x.style.display='none');
    document.getElementById('note'+n).style.display='block';
  }

  window.openMemories = function(){
    const card = document.getElementById('card');
    card.innerHTML = `
      <h1>Our Memory Box ğŸ§¸</h1>
      <p>Add photos & notes â€” synced live ğŸ¤</p>
      <input type="file" accept="image/*" onchange="uploadImage(this.files[0])" />
      <textarea id="noteInput" placeholder="Write a memory or note ğŸ’Œ"></textarea>
      <button class="btn" style="margin-top:12px" onclick="addNote()">Add Note ğŸ“</button>
      <div id="gallery" style="margin-top:20px;display:grid;grid-template-columns:repeat(auto-fill,minmax(140px,1fr));gap:18px"></div>
      <button class="btn" style="margin-top:24px" onclick="location.reload()">â¬… Go Back</button>
    `;

    onValue(memoriesRef, snap => {
      const g = document.getElementById('gallery');
      g.innerHTML = '';
      snap.forEach(c => {
        const d = c.val();
        const box = document.createElement('div');
        box.style.background = '#fff0f7';
        box.style.padding = '12px';
        box.style.borderRadius = '16px';
        if(d.type === 'image'){
          const i = document.createElement('img');
          i.src = d.content; i.style.width='100%'; i.style.borderRadius='12px';
          box.appendChild(i);
        }
        if(d.type === 'note'){
          const p = document.createElement('p');
          p.innerText = d.content; p.style.color='#d94b88';
          box.appendChild(p);
        }
        g.appendChild(box);
      })
    })
  }

  window.uploadImage = function(file){
    if(!file) return;
    const r = new FileReader();
    r.onload = e => push(memoriesRef,{type:'image',content:e.target.result});
    r.readAsDataURL(file);
  }

  window.addNote = function(){
    const t = document.getElementById('noteInput');
    if(!t.value.trim()) return;
    push(memoriesRef,{type:'note',content:t.value});
    t.value='';
  }
</script>

</body>
</html>
